:root {
  /* ë² ì´ìŠ¤ & ì¹´ë“œ ë°°ê²½ */
  --bg: #F1F3E0;          /* ê°€ì¥ ì—°í•œ í¬ë¦¼ì—°ë‘ */
  --bg-elevated: #FFFFFF; /* ì¹´ë“œ/íŒ¨ë„ìš© í°ìƒ‰ */
  --surface: #F8FAF0;     /* ì‚¬ì´ë“œ/íŒ¨ë„ ë°°ê²½ */
  --surface-strong: #F4F7EA;
  --surface-subtle: #EEF3DD;
  --surface-pill: #E5EBD5;

  /* í…Œë‘ë¦¬ & êµ¬ë¶„ì„  */
  --border-subtle: #D2DCB6;

  /* í¬ì¸íŠ¸ ì»¬ëŸ¬ (íŒ”ë ˆíŠ¸ ê¸°ë°˜) */
  --accent: #A1BC98;
  --accent-soft: rgba(161, 188, 152, 0.18);
  --accent-strong: #778873;

  /* í…ìŠ¤íŠ¸ */
  --text: #2F3A29;
  --text-muted: #7A8670;
  --text-contrast: #FFFFFF;

  /* ë§í’ì„  & ì•„ë°”íƒ€ */
  --user-bubble: #D2DCB6;
  --bot-bubble: #FFFFFF;
  --avatar-bg: #D2DCB6;
  --avatar-text: #3A4730;

  /* ê·¸ ì™¸ ê³µí†µ ê°’ */
  --radius-lg: 18px;
  --radius-md: 12px;
  --radius-sm: 8px;
  --shadow-soft: 0 12px 28px rgba(119, 136, 115, 0.22);
  --scrollbar-thumb: #C1D1AE;
  --header-gradient-start: var(--bg);
  --header-gradient-end: #D2DCB6;
}

body.theme-dark {
  --bg: #151d14;
  --bg-elevated: #1d271c;
  --surface: #1b241a;
  --surface-strong: #232f23;
  --surface-subtle: #2d3a2e;
  --surface-pill: #344437;

  --border-subtle: #3f4f3f;

  --accent: #A1BC98;
  --accent-soft: rgba(161, 188, 152, 0.12);
  --accent-strong: #93A98C;

  --text: #E6EBD7;
  --text-muted: #B1BEA6;
  --text-contrast: #0F140F;

  --user-bubble: #2f3d2f;
  --bot-bubble: #1f281f;
  --avatar-bg: #2f3d2f;
  --avatar-text: #dbe6cf;

  --shadow-soft: 0 12px 28px rgba(0, 0, 0, 0.35);
  --scrollbar-thumb: #4a5a48;
  --header-gradient-start: #1b241a;
  --header-gradient-end: #2d3a2e;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;
  background: var(--bg);
  color: var(--text);
  height: 100vh;
}

a {
  text-decoration: none;
  color: inherit;
}

.app {
  height: 100vh;
  display: flex;
  flex-direction: column;
}

/* í—¤ë” */
/* ê³µí†µ í—¤ë” ëª¨ì–‘ ê°•ì œ í†µì¼ */
.app-header {
  display: flex;
  align-items: center;          /* ì„¸ë¡œ ê°€ìš´ë° ì •ë ¬ */
  justify-content: space-between;
  padding: 16px 24px;           /* ìœ„ì•„ë˜ 16px, ì¢Œìš° 24px */
  min-height: 64px;             /* í—¤ë” ìµœì†Œ ë†’ì´ ê³ ì • */
  box-sizing: border-box;
  flex-shrink: 0;
  background: linear-gradient(
    90deg,
    var(--header-gradient-start),
    var(--header-gradient-end)
  );
}

/* í˜¹ì‹œ ë‹¤ë¥¸ ê³³ì—ì„œ headerì— ìŠ¤íƒ€ì¼ì„ ê±¸ì–´ë†¨ìœ¼ë©´ ê¹¨íŠ¸ë¦¬ê¸° */
header {
  margin: 0;
}

.logo {
  font-weight: 700;
  letter-spacing: 0.03em;
  font-size: 15px;
  color: var(--text);
  text-decoration: none;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.model-pill {
  font-size: 11px;
  padding: 4px 8px;
  border-radius: 999px;
  background: var(--accent-soft);
  color: var(--accent-strong);
}

/* ì „ì²´ ë ˆì´ì•„ì›ƒ */

.app-main {
  flex: 1;
  display: grid;
  grid-template-columns: 260px minmax(0, 1.6fr) 280px;
  gap: 0;
  height: calc(100vh - 56px);
}

/* ì‚¬ì´ë“œë°” */

.sidebar {
  border-right: 1px solid var(--border-subtle);
  padding: 12px;
  background: var(--surface);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.sidebar-top {
  margin-bottom: 8px;
}

.sidebar-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.sidebar-title {
  font-size: 12px;
  text-transform: uppercase;
  color: var(--text-muted);
  letter-spacing: 0.08em;
  margin-bottom: 8px;
}

.character-list {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.character-card {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 7px 8px;
  background: transparent;
  border-radius: 12px;
  border: 1px solid transparent;
  color: inherit;
  cursor: pointer;
  font-size: 13px;
  text-align: left;
  transition: background 0.18s ease, border-color 0.18s ease,
    transform 0.05s ease;
}

.character-card:hover {
  background: var(--accent-soft);
}

.character-card.active {
  background: var(--accent-soft);
  border-color: var(--accent-strong);
}

.char-avatar {
  width: 30px;
  height: 30px;
  border-radius: 999px;
  background: var(--avatar-bg);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  color: var(--avatar-text);
}

.char-avatar.pink {
  background: rgba(255, 122, 199, 0.2);
}

.char-avatar.blue {
  background: rgba(125, 160, 210, 0.22);
}

.char-meta {
  display: flex;
  flex-direction: column;
}

.char-name {
  font-size: 13px;
}

.char-sub {
  font-size: 11px;
  color: var(--text-muted);
}

/* ì±„íŒ… ì„¹ì…˜ */

.chat-section {
  display: flex;
  flex-direction: column;
  border-right: 1px solid var(--border-subtle);
  background: var(--surface-strong);
}

.chat-header {
  padding: 10px 16px;
  border-bottom: 1px solid var(--border-subtle);
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--bg-elevated);
}

.chat-title-area {
  display: flex;
  flex-direction: column;
}

.chat-title {
  font-size: 14px;
  font-weight: 600;
}

.chat-subtitle {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 2px;
}

.chat-header-actions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.chat-log {
  flex: 1;
  overflow-y: auto;
  padding: 14px 18px 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* ë©”ì‹œì§€ */

.message {
  display: flex;
  gap: 8px;
  align-items: flex-start;
}

.message.user {
  flex-direction: row-reverse;
}

.message-avatar {
  width: 26px;
  height: 26px;
  border-radius: 999px;
  background: var(--avatar-bg);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  flex-shrink: 0;
  color: var(--avatar-text);
}

.message.user .message-avatar {
  background: var(--accent);
  color: var(--text-contrast);
}

.message-body {
  max-width: 80%;
}

.message-meta {
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 2px;
}

.message-bubble {
  padding: 8px 10px;
  border-radius: 14px;
  font-size: 13px;
  line-height: 1.5;
  background: var(--bot-bubble);
  border: 1px solid rgba(0, 0, 0, 0.03);
  color: var(--text);
}

.message.user .message-bubble {
  background: var(--user-bubble);
  border-color: rgba(119, 136, 115, 0.35);
}

/* ğŸ”¹ ë§í’ì„  ë‚´ë¶€ ì»¨í…ì¸  + í•˜ë‹¨ ì•¡ì…˜ ë²„íŠ¼ ì˜ì—­ */

.message-bubble-content {
  /* ê¸°ë³¸ í…ìŠ¤íŠ¸ ì˜ì—­ */
}

.message-bubble-actions {
  margin-top: 6px;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  font-size: 11px;
  opacity: 0.9;
}

/* ì•„ì´ì½˜ ë²„íŠ¼ (ë¦¬ë¡¤/ë³µì‚¬/ìˆ˜ì •/ì‚­ì œ ê³µí†µ) */

.bubble-btn {
  border: none;
  padding: 4px;
  width: 22px;
  height: 22px;
  border-radius: 999px;
  background: var(--surface-pill);
  font-size: 0; /* ì•„ì´ì½˜ë§Œ ë³´ì´ê²Œ í…ìŠ¤íŠ¸ ìˆ¨ê¸°ê¸° */
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition:
    background-color 0.15s ease,
    color 0.15s ease,
    transform 0.05s ease;
}

.bubble-btn i {
  font-size: 13px;
  line-height: 1;
}

.bubble-btn:hover {
  background: var(--accent-soft);
  color: var(--text);
  transform: translateY(-0.5px);
}

.bubble-btn--reroll {
  font-weight: 600;
}

/* JSì—ì„œ ì“°ëŠ” ìˆ¨ê¹€ í´ë˜ìŠ¤ */
.bubble-btn.is-hidden,
.is-hidden {
  display: none !important;
}

/* ì…ë ¥ì°½ */

.chat-input {
  border-top: 1px solid var(--border-subtle);
  padding: 8px 10px 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  background: var(--surface);
}

#chat-input {
  width: 100%;
  resize: none;
  border-radius: 10px;
  border: 1px solid var(--border-subtle);
  padding: 8px 10px;
  background: var(--bg-elevated);
  color: var(--text);
  font-family: inherit;
  font-size: 13px;
  outline: none;
}

#chat-input:focus {
  border-color: var(--accent-strong);
  box-shadow: 0 0 0 1px rgba(161, 188, 152, 0.6);
}

.chat-input-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.chat-hints {
  font-size: 11px;
  color: var(--text-muted);
}

.chat-buttons {
  display: flex;
  gap: 8px;
}

/* ì˜¤ë¥¸ìª½ íŒ¨ë„ */

.sidepanel {
  padding: 12px;
  background: var(--surface);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.panel-section {
  border-radius: var(--radius-lg);
  background: var(--bg-elevated);
  border: 1px solid var(--border-subtle);
  padding: 10px 12px;
  box-shadow: var(--shadow-soft);
}

.panel-title {
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 6px;
}

.memory-box {
  font-size: 12px;
  color: var(--text-muted);
  background: var(--surface-strong);
  border-radius: var(--radius-md);
  padding: 8px 9px;
  border: 1px dashed var(--border-subtle);
  margin-bottom: 6px;
  white-space: pre-wrap;
}

.session-info {
  list-style: none;
  padding: 0;
  margin: 0;
  font-size: 12px;
  color: var(--text-muted);
}

.session-info li {
  margin-bottom: 4px;
}

/* ë²„íŠ¼ */

.btn {
  border-radius: 999px;
  border: 1px solid transparent;
  padding: 6px 12px;
  font-size: 12px;
  font-family: inherit;
  cursor: pointer;
  background: var(--surface-pill);
  color: var(--text);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  text-decoration: none;
}

.btn.primary {
  background: var(--accent-strong);
  color: var(--text-contrast);
  font-weight: 600;
  border-color: var(--accent-strong);
}

.btn.primary:hover {
  filter: brightness(1.05);
}

.btn.subtle {
  background: var(--surface-subtle);
  color: var(--text-muted);
  border-color: var(--border-subtle);
}

.btn.full {
  width: 100%;
}

.icon-btn {
  border-radius: 999px;
  border: 1px solid var(--border-subtle);
  padding: 5px 8px;
  font-size: 12px;
  background: var(--surface-subtle);
  color: var(--text-muted);
  cursor: pointer;
}

/* í…Œë§ˆ í† ê¸€ */

.theme-toggle {
  width: 36px;
  height: 36px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  border: 1px solid var(--border-subtle);
  background: var(--surface-pill);
  color: var(--text);
  cursor: pointer;
  box-shadow: var(--shadow-soft);
  transition: background-color 0.12s ease, transform 0.12s ease;
}

.theme-toggle:hover {
  background: var(--surface-subtle);
  transform: translateY(-1px);
}

/* ìŠ¤í¬ë¡¤ë°” ì¡°ê¸ˆ ê¾¸ë¯¸ê¸° */

.chat-log::-webkit-scrollbar,
.character-list::-webkit-scrollbar {
  width: 6px;
}

.chat-log::-webkit-scrollbar-thumb,
.character-list::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 999px;
}

/* ë°˜ì‘í˜• (í™”ë©´ ì¢ì„ ë•Œ ì˜¤ë¥¸ìª½ íŒ¨ë„/ì‚¬ì´ë“œë°” ìˆ¨ê¹€) */

@media (max-width: 960px) {
  .app-main {
    grid-template-columns: 220px minmax(0, 1.8fr);
  }
  .sidepanel {
    display: none;
  }
}

@media (max-width: 720px) {
  .app-main {
    grid-template-columns: minmax(0, 1fr);
  }
  .sidebar {
    display: none;
  }
}

/* ì—¬ëŸ¬ "í™”ë©´" ê³µí†µ ìŠ¤íƒ€ì¼ */

.screen {
  display: none;
  height: calc(100vh - 56px);
  overflow: hidden;
}

.screen.active {
  display: block;
}

/* ë©”ì¸ í™”ë©´ ë ˆì´ì•„ì›ƒ */

.home-wrap {
  padding: 20px 18px;
}

.home-wrap h1 {
  margin: 6px 0 8px;
}

.home-sub {
  font-size: 14px;
  color: var(--text-muted);
  margin-bottom: 16px;
}

.home-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
  gap: 12px;
}

.home-card {
  background: var(--bg-elevated);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-subtle);
  padding: 12px 14px;
  box-shadow: var(--shadow-soft);
  font-size: 13px;
}

/* ì„œë¸Œ í™”ë©´ ìƒë‹¨ í—¤ë” */

.screen-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 18px;
  border-bottom: 1px solid var(--border-subtle);
  background: var(--surface);
}

.screen-title {
  font-size: 14px;
  font-weight: 600;
}

/* ì œì‘/í”„ë¡œí•„ ê³µí†µ ì»¨í…Œì´ë„ˆ */

.generic-page {
  padding: 20px 18px 24px;
  font-size: 14px;
  color: var(--text);
  background: var(--surface-strong);
  min-height: calc(100vh - 56px);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.generic-page h2 {
  margin: 4px 0 6px;
  font-size: 18px;
}

.generic-page h3 {
  margin: 12px 0 4px;
  font-size: 15px;
}

.generic-page p {
  margin: 2px 0 4px;
}

/* ===== ì œì‘ íƒ­: ëª¨ë˜ ì…ë ¥ì°½ / ì„¤ëª…ë¬¸ / í”„ë¦¬ë·° ===== */

.text-input,
.generic-page textarea {
  width: 100%;
  padding: 0.8rem 1rem;
  margin-top: 0.3rem;
  border-radius: 12px;
  border: 1px solid var(--border-subtle);
  background-color: var(--bg-elevated);
  color: var(--text);
  font-size: 0.95rem;
  line-height: 1.5;
  resize: vertical;
  min-height: 3rem;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
  transition:
    border-color 0.15s ease,
    box-shadow 0.15s ease,
    background-color 0.15s ease,
    transform 0.05s ease;
  box-sizing: border-box;
  font-family: inherit;
}

.text-input::placeholder,
.generic-page textarea::placeholder {
  color: var(--text-muted);
}

.text-input:focus,
.generic-page textarea:focus {
  outline: none;
  border-color: var(--accent-strong);
  box-shadow:
    0 0 0 1px rgba(161, 188, 152, 0.45),
    0 6px 18px rgba(0, 0, 0, 0.16);
  transform: translateY(-1px);
}

/* ì œì‘ íƒ­ ì„¤ëª…ë¬¸ */

.help-text {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 4px;
}

/* ë²„íŠ¼ ë¬¶ìŒ ì •ë ¬ */

.button-row {
  display: flex;
  gap: 8px;
  margin-top: 10px;
  margin-bottom: 4px;
}

/* í”„ë¡¬í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸° ì¹´ë“œ */

.markdown-preview {
  margin-top: 0.75rem;
  padding: 1rem 1.1rem;
  border-radius: 12px;
  border: 1px solid var(--border-subtle);
  background-color: var(--bg-elevated);
  color: var(--text);
  max-height: 480px;
  overflow-y: auto;
  font-size: 0.95rem;
  line-height: 1.6;
}

.markdown-preview h1,
.markdown-preview h2,
.markdown-preview h3 {
  margin-top: 0.4rem;
  margin-bottom: 0.2rem;
}

.markdown-preview p {
  margin: 0.2rem 0;
}

.markdown-preview hr {
  border: none;
  border-top: 1px dashed var(--border-subtle);
  margin: 0.75rem 0;
}

.toast {
  position: fixed;
  bottom: 26px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--accent-strong);
  color: var(--text-contrast);
  padding: 10px 16px;
  font-size: 13px;
  border-radius: 10px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease, transform 0.25s ease;
  z-index: 9999;
}

.toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(-6px);
}

